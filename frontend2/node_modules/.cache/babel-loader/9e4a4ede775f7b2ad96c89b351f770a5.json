{"ast":null,"code":"import _objectSpread from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Grid,makeStyles}from'@material-ui/core';import axios from'axios';import React from'react';import{useSelector}from'react-redux';import MyServing from'../../components/MyServing';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MyServingsList(props){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),servings=_React$useState2[0],setServings=_React$useState2[1];var URL='http://127.0.0.1:8000';var user=useSelector(function(state){return state.user.userInfo;});var myServings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)}};_context.next=3;return axios.get(\"\".concat(URL,\"/api/restaurant/my-servings/\"),config);case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setServings(data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function myServings(){return _ref.apply(this,arguments);};}();React.useEffect(function(){myServings();},[]);var useStyles=makeStyles(function(theme){return{title:_objectSpread(_objectSpread({},theme.typography.content),{},{textAlign:'center',fontSize:'2.5rem',marginTop:'1rem',marginBottom:'30px'}),btnLeft:{poaition:'relative',marginRight:'auto',marginLeft:'20px'}};});var classes=useStyles();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:classes.title,children:\"My servings list\"}),/*#__PURE__*/_jsx(Button,{className:classes.btnLeft,variant:\"outlined\",color:\"primary\",onClick:function onClick(){return props.history.goBack();},children:\"GO BACK\"}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"center\",children:servings===null||servings===void 0?void 0:servings.map(function(item){var config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)}};var deleteServingHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$delete,data,newArr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"http://127.0.0.1:8000/api/restaurant/delete-serving/\".concat(item.id),config);case 2:_yield$axios$delete=_context2.sent;data=_yield$axios$delete.data;window.alert(data.message);newArr=servings.filter(function(e){return e.id!=item.id;});setServings(newArr);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteServingHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(MyServing,{item:item,deleteServingHandler:deleteServingHandler});})})]});}export default MyServingsList;","map":{"version":3,"sources":["E:/Full HTML/Django-react/foowoo/backend/frontend2/src/screens/restaurant/MyServingsList.js"],"names":["Button","Grid","makeStyles","axios","React","useSelector","MyServing","MyServingsList","props","useState","servings","setServings","URL","user","state","userInfo","myServings","config","headers","Authorization","token","get","data","useEffect","useStyles","theme","title","typography","content","textAlign","fontSize","marginTop","marginBottom","btnLeft","poaition","marginRight","marginLeft","classes","history","goBack","map","item","deleteServingHandler","delete","id","window","alert","message","newArr","filter","e"],"mappings":"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","sourcesContent":["import { Button, Grid, makeStyles } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport MyServing from '../../components/MyServing'\r\n\r\nfunction MyServingsList(props) {\r\n\r\n    const [servings, setServings] = React.useState([])\r\n\r\n    const URL = 'http://127.0.0.1:8000'\r\n    const user = useSelector(state => state.user.userInfo)\r\n    const myServings = async () => {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${user.token}`\r\n            }\r\n        }\r\n\r\n        const { data } = await axios.get(`${URL}/api/restaurant/my-servings/`, config)\r\n        setServings(data)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        myServings()\r\n    }, [])\r\n\r\n\r\n\r\n    const useStyles = makeStyles(theme => ({\r\n        title: {\r\n            ...theme.typography.content,\r\n            textAlign: 'center',\r\n            fontSize: '2.5rem',\r\n            marginTop: '1rem',\r\n            marginBottom: '30px'\r\n        },\r\n        btnLeft: {\r\n            poaition: 'relative',\r\n            marginRight: 'auto',\r\n            marginLeft: '20px'\r\n        }\r\n\r\n    }))\r\n    const classes = useStyles()\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1 className={classes.title} >My servings list</h1>\r\n            <Button className={classes.btnLeft} variant='outlined'\r\n                color='primary' onClick={() => props.history.goBack()} >GO BACK</Button>\r\n            <Grid container justify='center' >\r\n                {servings?.map(item => {\r\n                    const config = {\r\n                        headers: {\r\n                            'Content-Type': 'application/json',\r\n                            Authorization: `Bearer ${user.token}`\r\n                        }\r\n                    }\r\n                    const deleteServingHandler = async () => {\r\n                        const { data } = await axios.delete(`http://127.0.0.1:8000/api/restaurant/delete-serving/${item.id}`, config)\r\n                        window.alert(data.message)\r\n                        const newArr = servings.filter(e => e.id != item.id)\r\n                        setServings(newArr)\r\n\r\n                    }\r\n\r\n                    return (\r\n                        <MyServing item={item} deleteServingHandler={deleteServingHandler} />\r\n                    )\r\n                })}\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyServingsList\r\n"]},"metadata":{},"sourceType":"module"}