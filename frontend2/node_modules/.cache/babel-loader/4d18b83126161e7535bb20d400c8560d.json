{"ast":null,"code":"import _objectSpread from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/Full HTML/Django-react/foowoo/backend/frontend2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Grid,IconButton}from'@material-ui/core';import{makeStyles}from'@material-ui/styles';import axios from'axios';import React from'react';import{useSelector}from'react-redux';import{Link}from'react-router-dom';import CustomContainer from'./CustomContainer';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function DonationRequestRequests(_ref){var type=_ref.type;var user=useSelector(function(state){return state.user.userInfo;});var config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)},params:{'type':type}};var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),requests=_React$useState2[0],setRequests=_React$useState2[1];var myDonationRequests=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://foowoo1.herokuapp.com/api/restaurant/donation-or-request-requests/',config);case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setRequests(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function myDonationRequests(){return _ref2.apply(this,arguments);};}();React.useEffect(function(){myDonationRequests();},[]);var useStyles=makeStyles(function(theme){return{img:{width:'16vw',minWidth:'180px',borderRadius:'10px'},container:{alignItems:'center'},username:_objectSpread({},theme.typography.title),title:_objectSpread(_objectSpread({},theme.typography.content),{},{fontSize:'2.5rem',marginTop:'20px'})};});var classes=useStyles();return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"h1\",{className:classes.title,children:[type,\" Requests\"]}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",variant:\"contained\",style:{position:'absolute',left:'50px',top:'50px'},component:Link,to:'/rest/profile/'+user.id,children:\"Back\"}),requests.length<=0?/*#__PURE__*/_jsxs(\"h1\",{children:[\"No \",type,\" to show\"]}):requests.map(function(item,index){var acceptDeclineHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(command){var _yield$axios$post,data,newArr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('https://foowoo1.herokuapp.com/api/restaurant/accept-decline-donation-requests/',{'id':item.id,'serving_id':item.serving_id,'quantity':item.quantity,'message':command},config);case 2:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;console.log(data);newArr=requests.filter(function(e){return e.id!=item.id;});setRequests(newArr);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function acceptDeclineHandler(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(CustomContainer,{style:{width:'70%',paddingTop:'20px',paddingBottom:'20px'},children:/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.container,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"lll\",className:classes.img})})}),/*#__PURE__*/_jsx(Grid,{item:true,justify:\"center\",alignItems:\"center\",xs:12,md:2,children:/*#__PURE__*/_jsx(\"p\",{className:classes.username,children:item.serving})}),/*#__PURE__*/_jsx(Grid,{item:true,justify:\"center\",alignItems:\"center\",xs:12,md:2,children:/*#__PURE__*/_jsx(\"p\",{className:classes.username,children:item.username})}),/*#__PURE__*/_jsx(Grid,{item:true,justify:\"center\",alignItems:\"center\",xs:12,md:2,children:/*#__PURE__*/_jsx(\"p\",{className:classes.username,children:item.quantity})}),/*#__PURE__*/_jsxs(Grid,{item:true,justify:\"space-between\",alignItems:\"center\",xs:12,md:3,children:[/*#__PURE__*/_jsx(Button,{color:\"secondary\",variant:\"outlined\",onClick:function onClick(){return acceptDeclineHandler('accept');},children:\"Accept\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"outlined\",onClick:function onClick(){return acceptDeclineHandler('decline');},children:\"Decline\"})]})]})});})]});}export default DonationRequestRequests;","map":{"version":3,"sources":["E:/Full HTML/Django-react/foowoo/backend/frontend2/src/components/DonationRequestRequests.js"],"names":["Button","Grid","IconButton","makeStyles","axios","React","useSelector","Link","CustomContainer","DonationRequestRequests","type","user","state","userInfo","config","headers","Authorization","token","params","useState","requests","setRequests","myDonationRequests","get","data","useEffect","useStyles","theme","img","width","minWidth","borderRadius","container","alignItems","username","typography","title","content","fontSize","marginTop","classes","display","flexDirection","position","left","top","id","length","map","item","index","acceptDeclineHandler","command","post","serving_id","quantity","console","log","newArr","filter","e","paddingTop","paddingBottom","image","serving"],"mappings":"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","sourcesContent":["import { Button, Grid, IconButton } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/styles'\r\nimport axios from 'axios'\r\nimport React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport CustomContainer from './CustomContainer'\r\n\r\nfunction DonationRequestRequests({ type }) {\r\n    const user = useSelector(state => state.user.userInfo)\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${user.token}`,\r\n        },\r\n        params: {\r\n            'type': type\r\n        }\r\n\r\n    }\r\n    const [requests, setRequests] = React.useState([])\r\n    const myDonationRequests = async () => {\r\n        const { data } = await axios.get('https://foowoo1.herokuapp.com/api/restaurant/donation-or-request-requests/', config)\r\n        setRequests(data)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        myDonationRequests()\r\n    }, [])\r\n\r\n    const useStyles = makeStyles(theme => ({\r\n        img: {\r\n            width: '16vw',\r\n            minWidth: '180px',\r\n            borderRadius: '10px',\r\n        },\r\n        container: {\r\n            alignItems: 'center',\r\n        },\r\n        username: {\r\n            ...theme.typography.title,\r\n        },\r\n        title: {\r\n            ...theme.typography.content,\r\n            fontSize: '2.5rem',\r\n            marginTop: '20px'\r\n        }\r\n    }))\r\n    const classes = useStyles()\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            flexDirection: 'column',\r\n        }} >\r\n            <h1 className={classes.title} >{type} Requests</h1>\r\n            <Button color='secondary' variant='contained'\r\n                style={{ position: 'absolute', left: '50px', top: '50px' }}\r\n                component={Link} to={'/rest/profile/' + user.id}\r\n            >Back</Button>\r\n            {requests.length <= 0 ? (\r\n                <h1>No {type} to show</h1>\r\n            ) :\r\n                requests.map((item, index) => {\r\n                    const acceptDeclineHandler = async (command) => {\r\n                        const { data } = await axios.post('https://foowoo1.herokuapp.com/api/restaurant/accept-decline-donation-requests/', {\r\n                            'id': item.id,\r\n                            'serving_id': item.serving_id,\r\n                            'quantity': item.quantity,\r\n                            'message': command,\r\n\r\n                        }, config)\r\n                        console.log(data)\r\n                        const newArr = requests.filter(e => e.id != item.id)\r\n                        setRequests(newArr)\r\n                    }\r\n                    return (\r\n                        <CustomContainer style={{\r\n                            width: '70%',\r\n                            paddingTop: '20px',\r\n                            paddingBottom: '20px',\r\n                        }} >\r\n                            <Grid container className={classes.container} >\r\n                                <Grid item xs={12} md={3} >\r\n                                    <IconButton>\r\n                                        <img src={item.image} alt='lll' className={classes.img}  ></img>\r\n                                    </IconButton>\r\n                                </Grid>\r\n                                <Grid item justify='center' alignItems='center' xs={12} md={2} >\r\n                                    <p className={classes.username} >{item.serving}</p>\r\n                                </Grid>\r\n                                <Grid item justify='center' alignItems='center' xs={12} md={2} >\r\n                                    <p className={classes.username} >{item.username}</p>\r\n                                </Grid>\r\n                                <Grid item justify='center' alignItems='center' xs={12} md={2} >\r\n                                    <p className={classes.username} >{item.quantity}</p>\r\n                                </Grid>\r\n                                <Grid item justify='space-between' alignItems='center' xs={12} md={3} >\r\n                                    <Button color='secondary' variant='outlined'\r\n                                        onClick={() => acceptDeclineHandler('accept')}\r\n                                    >Accept</Button>\r\n                                    <Button color='primary' variant='outlined'\r\n                                        onClick={() => acceptDeclineHandler('decline')}\r\n                                    >Decline</Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </CustomContainer>\r\n                    )\r\n                }\r\n\r\n                )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DonationRequestRequests\r\n"]},"metadata":{},"sourceType":"module"}